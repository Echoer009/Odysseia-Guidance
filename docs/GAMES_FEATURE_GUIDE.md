# 游戏功能指南

## 🎴 抽鬼牌游戏功能

### 功能概述
- **游戏类型**: 抽鬼牌 (Old Maid)
- **AI对手**: 类脑娘 (4种不同策略)
- **交互方式**: Discord斜杠命令 + 按钮交互
- **UI界面**: 嵌入式消息 + 交互按钮

### 可用命令

#### 1. 开始游戏
```bash
/抽鬼牌
```
开始一局新的抽鬼牌游戏，与随机策略的类脑娘对战。

#### 2. 查看策略说明  
```bash
/鬼牌策略
```
查看类脑娘四种策略的详细说明和概率分布。

### 🎮 游戏规则

1. **牌组**: 52张普通牌 + 1张鬼牌 (👻)
2. **初始手牌**: 玩家和AI各发5张牌
3. **回合制**: 玩家和AI轮流从剩余牌堆抽牌
4. **胜负条件**: 抽到鬼牌的一方输掉游戏

### 🤖 类脑娘策略系统

#### 策略分布概率
- **低级类脑娘**: 30% 
- **中级类脑娘**: 50%
- **高级类脑娘**: 20%  
- **超级类脑娘**: 1% (特殊模式)

#### 策略特点

##### 低级类脑娘 (30%)
- 🎯 完全随机抽牌
- 😱 抽到鬼牌时中概率慌张
- 💬 反应示例: "啊啊啊！是鬼牌！我好害怕！"

##### 中级类脑娘 (50%)  
- 🧠 70%概率智能避开鬼牌
- 😮 抽到鬼牌时低概率惊讶
- 💬 反应示例: "哎呀，是鬼牌呢..."

##### 高级类脑娘 (20%)
- 🧠 高度智能，尽量避开鬼牌
- 😏 抽到鬼牌时冷静应对
- 💬 反应示例: "鬼牌而已，没什么大不了的"

##### 超级类脑娘 (1%)
- 🤖 直接读取游戏指令
- ⚡ 保证不抽到鬼牌
- 🎮 机械式反应
- 💬 反应示例: "指令读取完毕，鬼牌确认"

### 🎨 UI界面功能

#### 游戏状态显示
- 当前回合指示
- 双方手牌数量
- 剩余牌数
- AI策略信息

#### 交互按钮
- **抽牌按钮**: 显示前10张可选牌
- **重新开始**: 开始新游戏
- **结束游戏**: 退出当前游戏

### 🗂️ 代码结构

```
src/games/
├── cogs/
│   └── ghost_card_cog.py      # 游戏命令处理器
├── services/
│   └── ghost_card_service.py  # 游戏逻辑核心
└── ui/
    └── ghost_card_ui.py       # UI组件和嵌入消息
```

### 🔧 技术实现

#### 并发处理
- 使用线程池管理AI API调用
- 支持多个并发游戏会话
- 异步消息处理

#### 状态管理
- 内存中维护活跃游戏状态
- 游戏超时自动清理 (5分钟)
- 用户独立的游戏会话

### 🎯 性能特点

- **低延迟**: 本地游戏逻辑，快速响应
- **可扩展**: 模块化设计，易于添加新游戏
- **用户友好**: 直观的UI界面和交互
- **策略丰富**: 多种AI行为模式

### 🚀 使用建议

1. **测试游戏**: 先使用 `/抽鬼牌` 体验游戏流程
2. **了解策略**: 使用 `/鬼牌策略` 查看AI行为模式
3. **观察反应**: 注意不同策略类脑娘的独特反应
4. **享受游戏**: 体验1%概率的超级模式惊喜

### 🔮 未来扩展

- 添加游戏统计和排行榜
- 支持多人游戏模式
- 更多卡牌游戏类型
- 自定义AI策略权重
- 游戏成就系统

---

**注意**: 游戏数据仅在内存中保存，机器人重启后游戏状态会丢失。